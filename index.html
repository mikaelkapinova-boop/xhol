<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<title>Jeu de table ultra complet - Style Poker Claude Opus 4.1</title>
<style>
  /* RESET & BASE */
  * { margin:0; padding:0; box-sizing: border-box; }
  html, body {
    width: 100%; height: 100%;
    background: linear-gradient(120deg, #100700, #3b0f00);
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    color: #d1f0d1;
    overflow: hidden;
    user-select: none;
  }

  #app {
    position: relative;
    width: 960px;
    height: 720px;
    margin: 20px auto;
    background: radial-gradient(circle at center, #092209 40%, #021202 100%);
    border-radius: 30px;
    box-shadow: inset 0 0 60px #106010, 0 0 40px #194919;
    display: flex;
    flex-direction: column;
  }

  /* HEADER */
  header#game-header {
    height: 48px;
    background: linear-gradient(90deg, #205020, #183818);
    border-bottom: 2px solid #38a838;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 20px;
    font-weight: 700;
    color: #c8f2c8;
    letter-spacing: 0.07em;
    box-shadow: 0 3px 8px #0f470f;
  }

  #header-gems, #header-coins {
    display: flex;
    align-items: center;
    gap: 6px;
  }

  #header-gems-icon, #header-coins-icon {
    width: 20px;
    height: 20px;
  }

  /* MAIN TABLE CONTAINER */
  #table-view {
    flex: 1;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
  }

  #main-table {
    position: relative;
    width: 630px;
    height: 630px;
    border-radius: 50%;
    background: radial-gradient(circle at center, #184818, #0a210a);
    box-shadow:
      0 0 50px 10px #22992255 inset,
      0 0 60px 15px #116600;
  }

  /* TABLE CENTER */
  #table-center {
    position: absolute;
    left: 50%; top: 50%;
    transform: translate(-50%, -50%);
    width: 160px;
    height: 160px;
    background: radial-gradient(ellipse at center, #267026, #0d2c0d);
    border-radius: 50%;
    box-shadow: 0 0 25px 6px #2ecc2e inset;
    border: 3px solid #34cb34;
    z-index: 20;
  }

  /* PLAYER AVATARS CIRCULAR */
  .player-slot {
    position: absolute;
    width: 90px;
    height: 90px;
    border-radius: 50%;
    background-size: cover;
    background-position: center;
    border: 3px solid #334433;
    box-shadow: 0 0 12px #224422;
    transition: border-color 0.3s ease, box-shadow 0.3s ease, transform 0.3s ease;
    cursor: pointer;
    z-index: 30;
  }

  .player-slot.active {
    border-color: #70ef70;
    box-shadow: 0 0 20px 5px #82f682;
    transform: scale(1.1);
  }

  .player-name-tag {
    position: absolute;
    text-align: center;
    color: #a4fca4;
    font-size: 0.9rem;
    font-weight: 600;
    text-shadow:
      0 0 4px #2e7d2e,
      0 0 6px #1f5d1f;
    z-index: 40;
    pointer-events: none;
  }

  /* CARDS HAND */
  #player-hand {
    position: absolute;
    bottom: 12px;
    left: 50%;
    transform: translateX(-50%);
    width: 760px;
    height: 130px;
    background: rgba(20, 60, 20, 0.92);
    border-radius: 20px;
    box-shadow: 0 0 20px #1f9f1f;
    padding: 10px 20px;
    display: flex;
    overflow-x: auto;
    gap: 14px;
    align-items: center;
    user-select: none;
    z-index: 50;
  }

  .card {
    flex: 0 0 auto;
    width: 70px;
    height: 105px;
    border-radius: 15px;
    background: white;
    box-shadow:
      0 8px 15px rgba(0,0,0,0.35),
      inset 0 0 14px #dbeedd;
    border: 3px solid #478347;
    color: #2b6d2b;
    font-weight: 900;
    font-size: 1.55rem;
    text-align: center;
    cursor: pointer;
    display: flex;
    flex-direction: column;
    justify-content: space-around;
    align-items: center;
    transition:
      box-shadow 0.3s ease,
      transform 0.35s cubic-bezier(0.6, 0, 0.4, 1);
    user-select: none;
    position: relative;
  }

  .card.joker {
    color: #d83a3a;
  }

  .card .value {
    pointer-events: none;
  }

  .card .suit {
    font-size: 2.35rem;
    pointer-events: none;
  }

  .card.selected {
    outline: 4px solid #aaf3a9;
    box-shadow: 0 0 30px 6px #7ddd7a;
    transform: translateY(-18px) scale(1.15);
    z-index: 100;
  }

  /* SCROLLBAR */
  #player-hand::-webkit-scrollbar {
    height: 10px;
  }
  #player-hand::-webkit-scrollbar-track {
    background: #072007;
    border-radius: 15px;
  }
  #player-hand::-webkit-scrollbar-thumb {
    background: #459e46;
    border-radius: 15px;
  }

  /* SIDE BUTTONS */
  #left-panel, #right-panel {
    position: absolute;
    display: flex;
    flex-direction: column;
    gap: 24px;
    user-select: none;
    z-index: 60;
  }
  #left-panel {
    top: 70px;
    left: 20px;
  }
  #right-panel {
    top: 250px;
    right: 20px;
  }

  button.action-btn {
    cursor: pointer;
    font-weight: 800;
    font-size: 1.15rem;
    padding: 10px 18px;
    border: none;
    border-radius: 25px;
    background: linear-gradient(135deg, #238723, #105210);
    color: #d4f7d4;
    box-shadow:
      0 0 15px #3ae63a,
      inset 0 0 25px rgba(0,100,0,0.8);
    transition: transform 0.3s, box-shadow 0.3s, background-color 0.3s;
  }
  button.action-btn:hover {
    background: linear-gradient(135deg, #36ef36, #1fab1f);
    box-shadow:
      0 0 28px #20c420,
      inset 0 0 30px #2cf52c;
    transform: scale(1.12);
  }

  /* ICON BUTTONS */
  button.icon-btn {
    width: 54px;
    height: 54px;
    font-size: 28px;
    border-radius: 50%;
    border: none;
    background: linear-gradient(160deg, #293e29, #102310);
    color: #9bee9b;
    box-shadow: 0 0 10px #4dec4d;
    cursor: pointer;
    transition: all 0.25s ease-in-out;
  }
  button.icon-btn:hover {
    background: linear-gradient(160deg, #46f046, #23d823);
    box-shadow: 0 0 25px #65fa66;
    transform: scale(1.15);
  }

  /* LEADERBOARD BUTTON */
  #leaderboard-button {
    position: absolute;
    bottom: 30px;
    right: 30px;
    font-weight: 900;
    font-size: 1.3rem;
    background: linear-gradient(120deg, #6b3000, #bc7200);
    color: #ffe100;
    padding: 14px 28px;
    border-radius: 30px;
    border: none;
    cursor: pointer;
    box-shadow:
      0 0 26px #ffd400,
      inset 0 0 14px #f5e000;
    transition: background-color 0.3s, box-shadow 0.3s, transform 0.3s;
    z-index: 100;
  }
  #leaderboard-button:hover {
    background: linear-gradient(120deg, #844300, #deb700);
    box-shadow: 0 0 36px #ffd900, inset 0 0 18px #fbe024;
    transform: scale(1.1);
  }

  /* NOTIFICATIONS */
  #notification {
    position: absolute;
    top: 16px;
    left: 50%;
    transform: translateX(-50%);
    padding: 10px 22px;
    background: rgba(35, 95, 35, 0.95);
    font-weight: 700;
    border-radius: 22px;
    box-shadow: 0 0 18px #3ce53c;
    color: #d1f6d1;
    user-select: none;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.48s ease;
    z-index: 150;
  }
  #notification.active {
    opacity: 1;
    pointer-events: auto;
  }

  /* CHAT INTERFACE */
  #chat-container {
    position: absolute;
    bottom: 180px;
    right: 30px;
    width: 280px;
    max-height: 320px;
    background: rgba(15, 40, 15, 0.9);
    border-radius: 16px;
    box-shadow: 0 0 32px #2be22b;
    color: #b2f7b2;
    display: flex;
    flex-direction: column;
    z-index: 140;
    user-select: text;
  }
  #chat-header {
    padding: 12px 16px;
    border-bottom: 2px solid #36de36;
    font-weight: 800;
    font-size: 1.1rem;
    color: #aeffae;
  }
  #chat-messages {
    flex: 1;
    padding: 10px 14px;
    overflow-y: auto;
    font-size: 0.9rem;
    user-select: text;
  }
  #chat-input-container {
    display: flex;
    padding: 6px 10px;
    background-color: #164e16aa;
    border-radius: 0 0 16px 16px;
  }
  #chat-input {
    flex-grow: 1;
    padding: 8px 14px;
    border-radius: 18px;
    border: none;
    outline: none;
    font-size: 1rem;
    background: #245a24;
    color: #dff0dff0;
  }
  #chat-input::placeholder {
    color: #a5d7a5;
    opacity: 0.7;
  }
  #chat-send-btn {
    padding: 8px 16px;
    border-radius: 18px;
    border: none;
    margin-left: 8px;
    background: linear-gradient(140deg, #36de36, #1a8c1a);
    color: #e7ffe7;
    font-weight: 700;
    cursor: pointer;
    transition: background 0.3s ease;
  }
  #chat-send-btn:hover {
    background: linear-gradient(140deg, #4fff4f, #27ad27);
  }

  /* Scrollbar chat */
  #chat-messages::-webkit-scrollbar {
    width: 8px;
  }
  #chat-messages::-webkit-scrollbar-track {
    background: transparent;
  }
  #chat-messages::-webkit-scrollbar-thumb {
    background: #2aa32a;
    border-radius: 16px;
  }
</style>
</head>
<body>
  <div id="app" role="main" aria-label="Jeu de table de poker immersif">
    <header id="game-header" aria-live="polite">
      <span>MS Plomberie Poker Pro</span>
      <div id="header-gems" aria-label="Gemmes">
        <svg id="header-gems-icon" fill="#80ff80" viewBox="0 0 24 24" aria-hidden="true"><path d="M12 0l3 6 7 1-5 5 1 7-6-3-6 3 1-7-5-5 7-1z"/></svg>
        <span>35</span>
      </div>
      <div id="header-coins" aria-label="PiÃ¨ces d'or">
        <svg id="header-coins-icon" fill="#ffdd00" viewBox="0 0 24 24" aria-hidden="true"><circle cx="12" cy="12" r="10"/></svg>
        <span>70,780</span>
      </div>
    </header>

    <main id="table-view" role="region" aria-label="Table de poker principale">
      <div id="main-table" aria-label="Table de jeu circulaire">
        <div id="table-center" aria-label="Centre de la table"></div>
      </div>
    </main>

    <section id="player-hand" aria-label="Main du joueur"></section>

    <nav id="left-panel" aria-label="Boutons d'actions secondaires">
      <button class="action-btn" id="spin-btn" aria-pressed="false" aria-label="Lancer la roue Spin">Spin</button>
      <button class="action-btn" id="mission-btn" aria-pressed="false" aria-label="Voir les Missions">Mission</button>
      <button class="action-btn" id="shop-btn" aria-pressed="false" aria-label="Ouvrir la boutique">Shop</button>
    </nav>

    <nav id="right-panel" aria-label="Boutons d'actions principales">
      <button class="icon-btn" id="chat-toggle" aria-pressed="false" aria-label="Ouvrir/Fermer le Chat">ð¬</button>
      <button class="icon-btn" id="emoji-btn" aria-label="Ouvrir la fenÃªtre ÃmoticÃ´nes">ð</button>
    </nav>

    <button id="leaderboard-button" aria-label="Voir le classement">Leaderboard</button>

    <div id="notification" role="alert" aria-live="assertive" aria-atomic="true"></div>

    <section id="chat-container" aria-label="Discussion du jeu" hidden>
      <header id="chat-header">Chat</header>
      <div id="chat-messages" role="log" aria-live="polite" aria-atomic="false" tabindex="0"></div>
      <div id="chat-input-container">
        <input id="chat-input" type="text" aria-label="Message chat" placeholder="Tapez un messageâ¦" autocomplete="off" />
        <button id="chat-send-btn" aria-label="Envoyer le message">Envoyer</button>
      </div>
    </section>
  </div>

  <script>
  (() => {
    // VARIABLES DE JEU
    let players = [
      { id: 1, name: 'ledigorica22', avatar: 'https://i.pravatar.cc/80?img=7', active: true },
      { id: 2, name: 'mark1223', avatar: 'https://i.pravatar.cc/80?img=12', active: false },
      { id: 3, name: 'anakonda34', avatar: 'https://i.pravatar.cc/80?img=20', active: false },
      { id: 4, name: 'player4', avatar: 'https://i.pravatar.cc/80?img=44', active: false },
      { id: 5, name: 'player5', avatar: 'https://i.pravatar.cc/80?img=30', active: false },
      { id: 6, name: 'player6', avatar: 'https://i.pravatar.cc/80?img=11', active: false },
      { id: 7, name: 'player7', avatar: 'https://i.pravatar.cc/80?img=32', active: false },
      { id: 8, name: 'player8', avatar: 'https://i.pravatar.cc/80?img=25', active: false }
    ];

    let cards = [
      { value: '3', suit: 'â¦', color: 'red' }, { value: '4', suit: 'â£', color: 'black' }, { value: '4', suit: 'â¥', color: 'red' },
      { value: '6', suit: 'â ', color: 'black' }, { value: '8', suit: 'â£', color: 'black' }, { value: '8', suit: 'â¥', color: 'red' },
      { value: '8', suit: 'â ', color: 'black' }, { value: '9', suit: 'â¦', color: 'red' }, { value: '9', suit: 'â ', color: 'black' },
      { value: 'A', suit: 'â£', color: 'black' }, { value: 'A', suit: 'â ', color: 'black' }, { value: 'A', suit: 'â¥', color: 'red' },
      { value: '2', suit: 'â ', color: 'black' },
      { value: 'J', suit: 'Joker', color: 'red' }
    ];

    const app = document.getElementById('app');
    const mainTable = document.getElementById('main-table');
    const handContainer = document.getElementById('player-hand');
    const notification = document.getElementById('notification');
    const chatContainer = document.getElementById('chat-container');
    const chatMessages = document.getElementById('chat-messages');
    const chatInput = document.getElementById('chat-input');
    const chatSendBtn = document.getElementById('chat-send-btn');
    const chatToggleBtn = document.getElementById('chat-toggle');
    const emojiBtn = document.getElementById('emoji-btn');
    const leaderboardBtn = document.getElementById('leaderboard-button');

    let selectedCardIndex = null;
    let chatOpen = false;

    // UTILITAIRE CREATION ELEMENT
    function createEl(type, props = {}, ...children) {
      const el = document.createElement(type);
      for (let key in props) {
        if (key === 'className') el.className = props[key];
        else if (key === 'html') el.innerHTML = props[key];
        else if (key.startsWith('on') && typeof props[key] === 'function') {
          el.addEventListener(key.substring(2).toLowerCase(), props[key]);
        } else el.setAttribute(key, props[key]);
      }
      children.forEach(child => {
        if (typeof child === 'string') el.appendChild(document.createTextNode(child));
        else if (child instanceof Node) el.appendChild(child);
      });
      return el;
    }

    // AFFICHAGE JOUEURS AUTOUR TABLE
    function renderPlayers() {
      // Nettoyage avatars prÃ©cÃ©dents
      [...mainTable.querySelectorAll('.player-slot')].forEach(el => el.remove());
      [...mainTable.querySelectorAll('.player-name-tag')].forEach(el => el.remove());

      const cX = mainTable.clientWidth / 2;
      const cY = mainTable.clientHeight / 2;
      const radius = 280;
      const angleStep = (2 * Math.PI) / players.length;

      players.forEach((player, i) => {
        let angle = i * angleStep - Math.PI / 2; // dÃ©but en haut
        let x = cX + radius * Math.cos(angle);
        let y = cY + radius * Math.sin(angle);

        let avatar = createEl('div', {
          className: 'player-slot' + (player.active ? ' active' : ''),
          title: player.name,
          style: `left:${x-45}px; top:${y-45}px; background-image: url(${player.avatar});`
        });
        mainTable.appendChild(avatar);

        let nameTag = createEl('div', {
          className: 'player-name-tag',
          style: `left:${x-35}px; top:${y+40}px;`
        }, player.name);
        mainTable.appendChild(nameTag);
      });
    }

    // AFFICHAGE MAIN CARTE JOUEUR
    function renderHand() {
      handContainer.innerHTML = '';
      cards.forEach((card, idx) => {
        const cardEl = createEl('div', {
          className: 'card' + (idx === selectedCardIndex ? ' selected' : ''),
          'aria-label': `${card.value} de ${card.suit}`,
          role: 'listitem',
          style: `color:${card.color}`
        });

        let valueEl = createEl('div', { className: 'value', html: card.value });
        let suitEl = createEl('div', { className: 'suit', html: card.suit });

        cardEl.appendChild(valueEl);
        cardEl.appendChild(suitEl);

        cardEl.addEventListener('click', () => {
          if (selectedCardIndex === idx) {
            selectedCardIndex = null;
            notify('Carte dÃ©sÃ©lectionnÃ©e');
          } else {
            selectedCardIndex = idx;
            notify(`Carte sÃ©lectionnÃ©e : ${card.value} ${card.suit}`);
          }
          renderHand();
        });

        handContainer.appendChild(cardEl);
      });
    }

    // NOTIFICATIONS TEMPORAIRES
    let notifTimeout = null;
    function notify(text) {
      notification.textContent = text;
      notification.classList.add('active');
      clearTimeout(notifTimeout);
      notifTimeout = setTimeout(() => {
        notification.classList.remove('active');
      }, 3500);
    }

    // CHAT
    chatToggleBtn.addEventListener('click', () => {
      chatOpen = !chatOpen;
      chatContainer.toggleAttribute('hidden', !chatOpen);
      if (chatOpen) chatInput.focus();
    });

    chatSendBtn.addEventListener('click', () => {
      sendChatMessage();
    });

    chatInput.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') sendChatMessage();
    });

    function sendChatMessage() {
      let msg = chatInput.value.trim();
      if (!msg) return;
      let msgEl = createEl('div', {}, `[Vous] : ${msg}`);
      chatMessages.appendChild(msgEl);
      chatMessages.scrollTop = chatMessages.scrollHeight;
      chatInput.value = '';
    }

    emojiBtn.addEventListener('click', () => {
      notify('ÃmoticÃ´nes bientÃ´t disponibles !');
    });

    leaderboardBtn.addEventListener('click', () => {
      notify('Classement non encore implÃ©mentÃ©');
    });

    document.getElementById('spin-btn').addEventListener('click', () => notify('Action Spin activÃ©e'));
    document.getElementById('mission-btn').addEventListener('click', () => notify('Vos missions en cours'));
    document.getElementById('shop-btn').addEventListener('click', () => notify('Boutique ouverte'));

    // INITIALISATION ET RENDER
    function init() {
      renderPlayers();
      renderHand();
      notify('Bienvenue sur la table de jeu immersive !');
    }

    // REPOSITION AVATARS AU REDIMENSIONNEMENT
    window.addEventListener('resize', renderPlayers);

    init();
  })();
  </script>
</body>
</html>
